<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Researching vehicles involved in collisions with STATS19 data • stats19</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Researching vehicles involved in collisions with STATS19 data">
<meta property="og:description" content="">
<meta property="og:image" content="/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">stats19</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.1.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/stats19.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/blog.html">stats19: a package for road safety research</a>
    </li>
    <li>
      <a href="../articles/stats19-training-setup.html">An introduction to road safety analysis with R: setup notes</a>
    </li>
    <li>
      <a href="../articles/stats19-training.html">Introduction to R for road safety: an introduction to R and practical exercises</a>
    </li>
    <li>
      <a href="../articles/stats19-vehicles.html">Researching vehicles involved in collisions with STATS19 data</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ropensci/stats19">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Researching vehicles involved in collisions with STATS19 data</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ropensci/stats19/blob/master/vignettes/stats19-vehicles.Rmd"><code>vignettes/stats19-vehicles.Rmd</code></a></small>
      <div class="hidden name"><code>stats19-vehicles.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(stats19)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(dplyr)</a></code></pre></div>
<div id="vehicle-level-variables-in-the-stats19-datasets" class="section level1">
<h1 class="hasAnchor">
<a href="#vehicle-level-variables-in-the-stats19-datasets" class="anchor"></a>Vehicle level variables in the STATS19 datasets</h1>
<p>Of the three dataset types in STATS19, the vehicle tables are perhaps the most revealing yet under-explored. They look like this:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">v =<span class="st"> </span><span class="kw"><a href="../reference/get_stats19.html">get_stats19</a></span>(<span class="dt">year =</span> <span class="dv">2018</span>, <span class="dt">type =</span> <span class="st">"vehicles"</span>)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="co">#&gt; Files identified: dftRoadSafetyData_Vehicles_2018.csv</span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="co">#&gt;    http://data.dft.gov.uk.s3.amazonaws.com/road-accidents-safety-data/dftRoadSafetyData_Vehicles_2018.csv</span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="co">#&gt; Attempt downloading from:</span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="co">#&gt; Data saved at /tmp/RtmpYQd2PH/dftRoadSafetyData_Vehicles_2018.csv</span></a>
<a class="sourceLine" id="cb2-6" data-line-number="6">v</a>
<a class="sourceLine" id="cb2-7" data-line-number="7"><span class="co">#&gt; # A tibble: 226,409 x 23</span></a>
<a class="sourceLine" id="cb2-8" data-line-number="8"><span class="co">#&gt;    accident_index vehicle_referen… vehicle_type towing_and_arti…</span></a>
<a class="sourceLine" id="cb2-9" data-line-number="9"><span class="co">#&gt;    &lt;chr&gt;                     &lt;int&gt; &lt;chr&gt;        &lt;chr&gt;           </span></a>
<a class="sourceLine" id="cb2-10" data-line-number="10"><span class="co">#&gt;  1 2018010080971                 1 Car          No tow/articula…</span></a>
<a class="sourceLine" id="cb2-11" data-line-number="11"><span class="co">#&gt;  2 2018010080971                 2 Taxi/Privat… No tow/articula…</span></a>
<a class="sourceLine" id="cb2-12" data-line-number="12"><span class="co">#&gt;  3 2018010080973                 1 Car          No tow/articula…</span></a>
<a class="sourceLine" id="cb2-13" data-line-number="13"><span class="co">#&gt;  4 2018010080974                 1 Taxi/Privat… No tow/articula…</span></a>
<a class="sourceLine" id="cb2-14" data-line-number="14"><span class="co">#&gt;  5 2018010080974                 2 Car          No tow/articula…</span></a>
<a class="sourceLine" id="cb2-15" data-line-number="15"><span class="co">#&gt;  6 2018010080981                 1 Car          No tow/articula…</span></a>
<a class="sourceLine" id="cb2-16" data-line-number="16"><span class="co">#&gt;  7 2018010080981                 2 Van / Goods… No tow/articula…</span></a>
<a class="sourceLine" id="cb2-17" data-line-number="17"><span class="co">#&gt;  8 2018010080982                 1 Taxi/Privat… No tow/articula…</span></a>
<a class="sourceLine" id="cb2-18" data-line-number="18"><span class="co">#&gt;  9 2018010080982                 2 Car          No tow/articula…</span></a>
<a class="sourceLine" id="cb2-19" data-line-number="19"><span class="co">#&gt; 10 2018010080983                 1 Car          No tow/articula…</span></a>
<a class="sourceLine" id="cb2-20" data-line-number="20"><span class="co">#&gt; # … with 226,399 more rows, and 19 more variables: vehicle_manoeuvre &lt;chr&gt;,</span></a>
<a class="sourceLine" id="cb2-21" data-line-number="21"><span class="co">#&gt; #   vehicle_location_restricted_lane &lt;int&gt;, junction_location &lt;chr&gt;,</span></a>
<a class="sourceLine" id="cb2-22" data-line-number="22"><span class="co">#&gt; #   skidding_and_overturning &lt;chr&gt;, hit_object_in_carriageway &lt;int&gt;,</span></a>
<a class="sourceLine" id="cb2-23" data-line-number="23"><span class="co">#&gt; #   vehicle_leaving_carriageway &lt;int&gt;, hit_object_off_carriageway &lt;int&gt;,</span></a>
<a class="sourceLine" id="cb2-24" data-line-number="24"><span class="co">#&gt; #   first_point_of_impact &lt;chr&gt;, was_vehicle_left_hand_drive &lt;chr&gt;,</span></a>
<a class="sourceLine" id="cb2-25" data-line-number="25"><span class="co">#&gt; #   journey_purpose_of_driver &lt;chr&gt;, sex_of_driver &lt;chr&gt;, age_of_driver &lt;int&gt;,</span></a>
<a class="sourceLine" id="cb2-26" data-line-number="26"><span class="co">#&gt; #   age_band_of_driver &lt;int&gt;, engine_capacity_cc &lt;int&gt;, propulsion_code &lt;chr&gt;,</span></a>
<a class="sourceLine" id="cb2-27" data-line-number="27"><span class="co">#&gt; #   age_of_vehicle &lt;int&gt;, driver_imd_decile &lt;chr&gt;, driver_home_area_type &lt;int&gt;,</span></a>
<a class="sourceLine" id="cb2-28" data-line-number="28"><span class="co">#&gt; #   vehicle_imd_decile &lt;int&gt;</span></a></code></pre></div>
<p>We will categorise the vehicle types to simplify subsequent results:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">v =<span class="st"> </span>v <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">vehicle_type2 =</span> <span class="kw"><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when</a></span>(</a>
<a class="sourceLine" id="cb3-2" data-line-number="2">  <span class="kw"><a href="https://rdrr.io/r/base/grep.html">grepl</a></span>(<span class="dt">pattern =</span> <span class="st">"motorcycle"</span>, vehicle_type, <span class="dt">ignore.case =</span> <span class="ot">TRUE</span>) <span class="op">~</span><span class="st"> "Motorbike"</span>,</a>
<a class="sourceLine" id="cb3-3" data-line-number="3">  <span class="kw"><a href="https://rdrr.io/r/base/grep.html">grepl</a></span>(<span class="dt">pattern =</span> <span class="st">"Car"</span>, vehicle_type, <span class="dt">ignore.case =</span> <span class="ot">TRUE</span>) <span class="op">~</span><span class="st"> "Car"</span>,</a>
<a class="sourceLine" id="cb3-4" data-line-number="4">  <span class="kw"><a href="https://rdrr.io/r/base/grep.html">grepl</a></span>(<span class="dt">pattern =</span> <span class="st">"Bus"</span>, vehicle_type, <span class="dt">ignore.case =</span> <span class="ot">TRUE</span>) <span class="op">~</span><span class="st"> "Bus"</span>,</a>
<a class="sourceLine" id="cb3-5" data-line-number="5">  <span class="kw"><a href="https://rdrr.io/r/base/grep.html">grepl</a></span>(<span class="dt">pattern =</span> <span class="st">"cycle"</span>, vehicle_type, <span class="dt">ignore.case =</span> <span class="ot">TRUE</span>) <span class="op">~</span><span class="st"> "Cycle"</span>,</a>
<a class="sourceLine" id="cb3-6" data-line-number="6">  <span class="co"># grepl(pattern = "Van", vehicle_type, ignore.case = TRUE) ~ "Van",</span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7">  <span class="kw"><a href="https://rdrr.io/r/base/grep.html">grepl</a></span>(<span class="dt">pattern =</span> <span class="st">"Goods"</span>, vehicle_type, <span class="dt">ignore.case =</span> <span class="ot">TRUE</span>) <span class="op">~</span><span class="st"> "Goods"</span>,</a>
<a class="sourceLine" id="cb3-8" data-line-number="8">  </a>
<a class="sourceLine" id="cb3-9" data-line-number="9">  <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> "Other"</span></a>
<a class="sourceLine" id="cb3-10" data-line-number="10">))</a>
<a class="sourceLine" id="cb3-11" data-line-number="11"><span class="co"># barplot(table(v$vehicle_type2))</span></a></code></pre></div>
<p>All of these variables are of potential interest to road safety researchers. Let’s take a look at summaries of a few of them:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/table.html">table</a></span>(v<span class="op">$</span>vehicle_type2)</a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="co">#&gt;       Bus       Car     Cycle     Goods Motorbike     Other </span></a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="co">#&gt;      4918    164645     18125     18020     17890      2811</span></a>
<a class="sourceLine" id="cb4-5" data-line-number="5"><span class="kw"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(v<span class="op">$</span>age_of_driver)</a>
<a class="sourceLine" id="cb4-6" data-line-number="6"><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></a>
<a class="sourceLine" id="cb4-7" data-line-number="7"><span class="co">#&gt;   -1.00   23.00   35.00   35.52   50.00  101.00</span></a>
<a class="sourceLine" id="cb4-8" data-line-number="8"><span class="kw"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(v<span class="op">$</span>engine_capacity_cc)</a>
<a class="sourceLine" id="cb4-9" data-line-number="9"><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></a>
<a class="sourceLine" id="cb4-10" data-line-number="10"><span class="co">#&gt;      -1     125    1398    1444    1956   99999</span></a>
<a class="sourceLine" id="cb4-11" data-line-number="11"><span class="kw"><a href="https://rdrr.io/r/base/table.html">table</a></span>(v<span class="op">$</span>propulsion_code)</a>
<a class="sourceLine" id="cb4-12" data-line-number="12"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb4-13" data-line-number="13"><span class="co">#&gt;         Electric  Electric diesel              Gas      Gas/Bi-fuel </span></a>
<a class="sourceLine" id="cb4-14" data-line-number="14"><span class="co">#&gt;              266               67               31              130 </span></a>
<a class="sourceLine" id="cb4-15" data-line-number="15"><span class="co">#&gt;        Heavy oil  Hybrid electric           Petrol Petrol/Gas (LPG) </span></a>
<a class="sourceLine" id="cb4-16" data-line-number="16"><span class="co">#&gt;            77109             3821            93644               29</span></a>
<a class="sourceLine" id="cb4-17" data-line-number="17"><span class="kw"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(v<span class="op">$</span>age_of_vehicle)</a>
<a class="sourceLine" id="cb4-18" data-line-number="18"><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></a>
<a class="sourceLine" id="cb4-19" data-line-number="19"><span class="co">#&gt;  -1.000  -1.000   5.000   5.727  10.000  84.000</span></a></code></pre></div>
<p>The output shows vehicle type (a wide range of vehicles are represented), age of driver (with young and elderly drivers often seen as more risky), engine capacity and populsion (related to vehicle type and size) and age of vehicle. In addition to these factors appearing in prior road safety research and debate, they are also things that policy makers can influence, e.g by:</p>
<ul>
<li>Encouraging modal shift away more dangerous modes and towards safer modes</li>
<li>Incentivising people in particular risk categories to use safer modes</li>
<li>Encouraging use of certain (safer) kinds of vehicle, e.g. with tax policies</li>
</ul>
</div>
<div id="relationships-between-vehicle-type-and-crash-severity" class="section level1">
<h1 class="hasAnchor">
<a href="#relationships-between-vehicle-type-and-crash-severity" class="anchor"></a>Relationships between vehicle type and crash severity</h1>
<p>To explore the relationship between vehicles and crash severity, we must first join on the ‘accidents’ table:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">a =<span class="st"> </span><span class="kw"><a href="../reference/get_stats19.html">get_stats19</a></span>(<span class="dt">year =</span> <span class="dv">2018</span>, <span class="dt">type =</span> <span class="st">"accidents"</span>)</a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="co">#&gt; Files identified: dftRoadSafetyData_Accidents_2018.csv</span></a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="co">#&gt;    http://data.dft.gov.uk.s3.amazonaws.com/road-accidents-safety-data/dftRoadSafetyData_Accidents_2018.csv</span></a>
<a class="sourceLine" id="cb5-4" data-line-number="4"><span class="co">#&gt; Attempt downloading from:</span></a>
<a class="sourceLine" id="cb5-5" data-line-number="5"><span class="co">#&gt; Data saved at /tmp/RtmpYQd2PH/dftRoadSafetyData_Accidents_2018.csv</span></a>
<a class="sourceLine" id="cb5-6" data-line-number="6"><span class="co">#&gt; Reading in:</span></a>
<a class="sourceLine" id="cb5-7" data-line-number="7"><span class="co">#&gt; /tmp/RtmpYQd2PH/dftRoadSafetyData_Accidents_2018.csv</span></a>
<a class="sourceLine" id="cb5-8" data-line-number="8"><span class="co">#&gt; date and time columns present, creating formatted datetime column</span></a>
<a class="sourceLine" id="cb5-9" data-line-number="9">va =<span class="st"> </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/join.html">inner_join</a></span>(v, a)</a>
<a class="sourceLine" id="cb5-10" data-line-number="10"><span class="co">#&gt; Joining, by = "accident_index"</span></a></code></pre></div>
<p>Now we have additional variables available to us:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/dim.html">dim</a></span>(v)</a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="co">#&gt; [1] 226409     24</span></a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="kw"><a href="https://rdrr.io/r/base/dim.html">dim</a></span>(va)</a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="co">#&gt; [1] 226409     56</span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5"><span class="kw"><a href="https://rdrr.io/r/base/names.html">names</a></span>(va)</a>
<a class="sourceLine" id="cb6-6" data-line-number="6"><span class="co">#&gt;  [1] "accident_index"                             </span></a>
<a class="sourceLine" id="cb6-7" data-line-number="7"><span class="co">#&gt;  [2] "vehicle_reference"                          </span></a>
<a class="sourceLine" id="cb6-8" data-line-number="8"><span class="co">#&gt;  [3] "vehicle_type"                               </span></a>
<a class="sourceLine" id="cb6-9" data-line-number="9"><span class="co">#&gt;  [4] "towing_and_articulation"                    </span></a>
<a class="sourceLine" id="cb6-10" data-line-number="10"><span class="co">#&gt;  [5] "vehicle_manoeuvre"                          </span></a>
<a class="sourceLine" id="cb6-11" data-line-number="11"><span class="co">#&gt;  [6] "vehicle_location_restricted_lane"           </span></a>
<a class="sourceLine" id="cb6-12" data-line-number="12"><span class="co">#&gt;  [7] "junction_location"                          </span></a>
<a class="sourceLine" id="cb6-13" data-line-number="13"><span class="co">#&gt;  [8] "skidding_and_overturning"                   </span></a>
<a class="sourceLine" id="cb6-14" data-line-number="14"><span class="co">#&gt;  [9] "hit_object_in_carriageway"                  </span></a>
<a class="sourceLine" id="cb6-15" data-line-number="15"><span class="co">#&gt; [10] "vehicle_leaving_carriageway"                </span></a>
<a class="sourceLine" id="cb6-16" data-line-number="16"><span class="co">#&gt; [11] "hit_object_off_carriageway"                 </span></a>
<a class="sourceLine" id="cb6-17" data-line-number="17"><span class="co">#&gt; [12] "first_point_of_impact"                      </span></a>
<a class="sourceLine" id="cb6-18" data-line-number="18"><span class="co">#&gt; [13] "was_vehicle_left_hand_drive"                </span></a>
<a class="sourceLine" id="cb6-19" data-line-number="19"><span class="co">#&gt; [14] "journey_purpose_of_driver"                  </span></a>
<a class="sourceLine" id="cb6-20" data-line-number="20"><span class="co">#&gt; [15] "sex_of_driver"                              </span></a>
<a class="sourceLine" id="cb6-21" data-line-number="21"><span class="co">#&gt; [16] "age_of_driver"                              </span></a>
<a class="sourceLine" id="cb6-22" data-line-number="22"><span class="co">#&gt; [17] "age_band_of_driver"                         </span></a>
<a class="sourceLine" id="cb6-23" data-line-number="23"><span class="co">#&gt; [18] "engine_capacity_cc"                         </span></a>
<a class="sourceLine" id="cb6-24" data-line-number="24"><span class="co">#&gt; [19] "propulsion_code"                            </span></a>
<a class="sourceLine" id="cb6-25" data-line-number="25"><span class="co">#&gt; [20] "age_of_vehicle"                             </span></a>
<a class="sourceLine" id="cb6-26" data-line-number="26"><span class="co">#&gt; [21] "driver_imd_decile"                          </span></a>
<a class="sourceLine" id="cb6-27" data-line-number="27"><span class="co">#&gt; [22] "driver_home_area_type"                      </span></a>
<a class="sourceLine" id="cb6-28" data-line-number="28"><span class="co">#&gt; [23] "vehicle_imd_decile"                         </span></a>
<a class="sourceLine" id="cb6-29" data-line-number="29"><span class="co">#&gt; [24] "vehicle_type2"                              </span></a>
<a class="sourceLine" id="cb6-30" data-line-number="30"><span class="co">#&gt; [25] "location_easting_osgr"                      </span></a>
<a class="sourceLine" id="cb6-31" data-line-number="31"><span class="co">#&gt; [26] "location_northing_osgr"                     </span></a>
<a class="sourceLine" id="cb6-32" data-line-number="32"><span class="co">#&gt; [27] "longitude"                                  </span></a>
<a class="sourceLine" id="cb6-33" data-line-number="33"><span class="co">#&gt; [28] "latitude"                                   </span></a>
<a class="sourceLine" id="cb6-34" data-line-number="34"><span class="co">#&gt; [29] "police_force"                               </span></a>
<a class="sourceLine" id="cb6-35" data-line-number="35"><span class="co">#&gt; [30] "accident_severity"                          </span></a>
<a class="sourceLine" id="cb6-36" data-line-number="36"><span class="co">#&gt; [31] "number_of_vehicles"                         </span></a>
<a class="sourceLine" id="cb6-37" data-line-number="37"><span class="co">#&gt; [32] "number_of_casualties"                       </span></a>
<a class="sourceLine" id="cb6-38" data-line-number="38"><span class="co">#&gt; [33] "date"                                       </span></a>
<a class="sourceLine" id="cb6-39" data-line-number="39"><span class="co">#&gt; [34] "day_of_week"                                </span></a>
<a class="sourceLine" id="cb6-40" data-line-number="40"><span class="co">#&gt; [35] "time"                                       </span></a>
<a class="sourceLine" id="cb6-41" data-line-number="41"><span class="co">#&gt; [36] "local_authority_district"                   </span></a>
<a class="sourceLine" id="cb6-42" data-line-number="42"><span class="co">#&gt; [37] "local_authority_highway"                    </span></a>
<a class="sourceLine" id="cb6-43" data-line-number="43"><span class="co">#&gt; [38] "first_road_class"                           </span></a>
<a class="sourceLine" id="cb6-44" data-line-number="44"><span class="co">#&gt; [39] "first_road_number"                          </span></a>
<a class="sourceLine" id="cb6-45" data-line-number="45"><span class="co">#&gt; [40] "road_type"                                  </span></a>
<a class="sourceLine" id="cb6-46" data-line-number="46"><span class="co">#&gt; [41] "speed_limit"                                </span></a>
<a class="sourceLine" id="cb6-47" data-line-number="47"><span class="co">#&gt; [42] "junction_detail"                            </span></a>
<a class="sourceLine" id="cb6-48" data-line-number="48"><span class="co">#&gt; [43] "junction_control"                           </span></a>
<a class="sourceLine" id="cb6-49" data-line-number="49"><span class="co">#&gt; [44] "second_road_class"                          </span></a>
<a class="sourceLine" id="cb6-50" data-line-number="50"><span class="co">#&gt; [45] "second_road_number"                         </span></a>
<a class="sourceLine" id="cb6-51" data-line-number="51"><span class="co">#&gt; [46] "pedestrian_crossing_human_control"          </span></a>
<a class="sourceLine" id="cb6-52" data-line-number="52"><span class="co">#&gt; [47] "pedestrian_crossing_physical_facilities"    </span></a>
<a class="sourceLine" id="cb6-53" data-line-number="53"><span class="co">#&gt; [48] "light_conditions"                           </span></a>
<a class="sourceLine" id="cb6-54" data-line-number="54"><span class="co">#&gt; [49] "weather_conditions"                         </span></a>
<a class="sourceLine" id="cb6-55" data-line-number="55"><span class="co">#&gt; [50] "road_surface_conditions"                    </span></a>
<a class="sourceLine" id="cb6-56" data-line-number="56"><span class="co">#&gt; [51] "special_conditions_at_site"                 </span></a>
<a class="sourceLine" id="cb6-57" data-line-number="57"><span class="co">#&gt; [52] "carriageway_hazards"                        </span></a>
<a class="sourceLine" id="cb6-58" data-line-number="58"><span class="co">#&gt; [53] "urban_or_rural_area"                        </span></a>
<a class="sourceLine" id="cb6-59" data-line-number="59"><span class="co">#&gt; [54] "did_police_officer_attend_scene_of_accident"</span></a>
<a class="sourceLine" id="cb6-60" data-line-number="60"><span class="co">#&gt; [55] "lsoa_of_accident_location"                  </span></a>
<a class="sourceLine" id="cb6-61" data-line-number="61"><span class="co">#&gt; [56] "datetime"</span></a></code></pre></div>
<p>Let’s see how crash severity relates to the variables of interest mentioned above:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/stats/xtabs.html">xtabs</a></span>(<span class="op">~</span>vehicle_type2 <span class="op">+</span><span class="st"> </span>accident_severity, <span class="dt">data =</span> va) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/prop.table.html">prop.table</a></span>()</a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="co">#&gt;              accident_severity</span></a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="co">#&gt; vehicle_type2        Fatal      Serious       Slight</span></a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="co">#&gt;     Bus       0.0002605903 0.0035820131 0.0178791479</span></a>
<a class="sourceLine" id="cb7-5" data-line-number="5"><span class="co">#&gt;     Car       0.0082063876 0.1146465026 0.6043487671</span></a>
<a class="sourceLine" id="cb7-6" data-line-number="6"><span class="co">#&gt;     Cycle     0.0004814296 0.0174993044 0.0620735041</span></a>
<a class="sourceLine" id="cb7-7" data-line-number="7"><span class="co">#&gt;     Goods     0.0020626389 0.0144075545 0.0631202823</span></a>
<a class="sourceLine" id="cb7-8" data-line-number="8"><span class="co">#&gt;     Motorbike 0.0017181296 0.0259574487 0.0513407153</span></a>
<a class="sourceLine" id="cb7-9" data-line-number="9"><span class="co">#&gt;     Other     0.0004019275 0.0025308181 0.0094828386</span></a>
<a class="sourceLine" id="cb7-10" data-line-number="10"><span class="kw"><a href="https://rdrr.io/r/stats/xtabs.html">xtabs</a></span>(<span class="op">~</span>vehicle_type2 <span class="op">+</span><span class="st"> </span>accident_severity, <span class="dt">data =</span> va) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/prop.table.html">prop.table</a></span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/graphics/plot.html">plot</a></span>()</a></code></pre></div>
<p><img src="stats19-vehicles_files/figure-html/unnamed-chunk-7-1.png" width="100%"></p>
<p>As expected, crashes involving large vehicles such as buses and good vehicles tend to be more serious (involve proportionally more deaths) than crashes involving smaller vehicles.</p>
<p>To focus only on cars, we can filter the <code>va</code> table as follows:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">vac =<span class="st"> </span>va <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(vehicle_type2 <span class="op">==</span><span class="st"> "Car"</span>)</a></code></pre></div>
<p>The best proxy we have for car type in the open STATS19 data (there are non-open versions of the data with additional columns) is engine capacity, measured in cubic centimetres (cc). The distribution of engine cc’s in the cars dataset created above is shown below.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(vac<span class="op">$</span>engine_capacity_cc)</a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="co">#&gt;      -1    1198    1560    1440    1968   19997</span></a></code></pre></div>
<p>The output shows that there are some impossible values in the data, likely due to recording error. Very few cars have an engine capacity above 5 litres (5000 cc) and we can be confident that none have an engine capacity below 300 cc. We’ll identify these records and remove them as follows:</p>
<p>We have set the anomolous vehicle size data to NA meaning it will not be used in the subsequent analysis.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#vehicle-level-variables-in-the-stats19-datasets">Vehicle level variables in the STATS19 datasets</a></li>
      <li><a href="#relationships-between-vehicle-type-and-crash-severity">Relationships between vehicle type and crash severity</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Robin Lovelace, Malcolm Morgan, Layik Hama, Mark Padgham, RAC Foundation.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
